#!/usr/bin/env sh
#
#  vncforward
#  .dotfiles
#
#  Created by Alexander Rudy on 2016-10-10.
#  Copyright 2016 Alexander Rudy. All rights reserved.
#

cmd=`basename $0`
if [ ! $# -ge 3 ]; then
    echo "usage: $cmd n_min n_max args-to-ssh"
    echo " e.g.: $cmd 1 5 user@host"
    exit 1
fi

NMIN=$1
shift
NMAX=$1
shift
ARGS="-N -f"
for (( i = $NMIN; i < $NMAX; i++ )); do
    let "port=$i+5900"
    ARGS="$ARGS -L$port:localhost:$port"
done
echo "ssh $ARGS $@"
ssh $ARGS $@
